---
sidebar_position: 2
---

# 配置

## 通用
BlueMap的配置文件使用[HOCON](https://github.com/lightbend/config/blob/master/HOCON.md)格式。
请确保您对如何使用HOCON有基本的了解。

如果您没有配置文件，BlueMap在启动时会为您生成示例配置文件。
在这些生成的配置文件中，每个字段上方都有注释，说明其作用及其默认值（如果有）。请阅读这些注释！它们会解释很多内容！ :)

## 配置您的地图（添加和删除地图）
在您的配置文件夹中，您可以找到一个名为`maps`的文件夹。该文件夹包含您希望BlueMap渲染、更新和/或在Web应用程序中显示的每个地图的`.conf`文件。

这些配置文件的名称（不带`.conf`扩展名）将是您地图的标识符。例如，您将在命令中使用该标识符来选择地图。如果您重命名配置文件，就像创建了一个新地图，因为BlueMap也会根据该标识符存储所有地图信息。

如果您想删除地图，只需删除其`.conf`文件。
删除文件并重新加载/重启BlueMap后，您可能希望删除该地图之前渲染的地图数据，您可以使用`/bluemap storages <storage> delete <map>`命令来完成。
在默认的文件存储中，您也可以通过手动删除其文件夹来完成，通常位于`bluemap/web/maps/`。

如果您想添加地图，可以在此文件夹中创建一个新的`.conf`文件并填写正确的信息。
最简单的方法可能是复制默认配置文件中的一个`.conf`文件并根据您的喜好进行编辑。

在每个地图配置中，您可以更改各种地图设置，例如地图的显示名称或地图在Web应用程序中显示的顺序。只需查看BlueMap为您生成的默认配置文件中的注释。所有内容都在那里有解释。

## 性能调整
BlueMap是异步渲染到您的服务器线程的。这意味着它不会在任何时候直接阻塞您的服务器线程。
因此，只要您的CPU没有完全被占用，您的服务器在BlueMap渲染时不应被拖慢。
您可以通过更改BlueMap的`core.conf`中的`render-thread-count`来控制BlueMap（大致）使用多少个CPU核心。
您给它的线程越多，它将使用的CPU核心越多，但渲染速度也会越快。

Minecraft本身不能利用太多的CPU核心。主服务器线程将始终只使用一个CPU核心，然后可能会有一些额外的用于世界生成或网络线程的使用。但总的来说，它通常不能利用超过大约3个核心。
这意味着如果您想优化渲染速度，可以将剩余的这些核心分配给BlueMap。

如果您的服务器CPU有4个或更少的核心，您可能希望将`render-thread-count`设置为1。
如果您仍然遇到延迟问题并认为这是由BlueMap引起的，那么您可以告诉BlueMap在有一定数量的玩家在线时完全不渲染：
BlueMap的`plugin.conf`中的`player-render-limit`设置控制这一点。

## 托管静态地图
如果您有一个不再存在的世界的旧地图或在不同服务器上渲染的地图，您仍然可以在Web应用程序中显示它。BlueMap只需要知道地图的标识符（参见["配置地图存储"](#configuring-the-map-storages-store-maps-in-a-database-or-a-different-directory)）以及它存储在哪个存储中。
因此，我们可以添加一个名为地图标识符的新地图配置，唯一的设置是`storage`设置。

例如，如果您有一个标识符为`mymap`的地图，并且它存储在`storages/sql.conf`存储中，您可以添加一个新的地图配置`maps/mymap.conf`，内容如下：
```hocon
storage: "sql"
```
然后该地图应该会显示在Web应用程序中。